syms f1 f2 f3 f4 T Mx My Mz kappa dxy cmd

% d_z = 0.092 / 2; % diameter of crazyflie
% d_xy = d_z*(2^0.5)/2;
% kappa = -10.311 * 10^-7
% % kappa = 1;
% 
% [a1 a2 a3 a4] = solve([Mx == d_xy*(-f1 + f2 + f3 - f4), My == d_xy*(- f1 - f2 + f3 + f4), Mz == 0.2*(f1 - f2 + f3 - f4)], [f1, f2, f3, f4])

inv([-dxy dxy dxy -dxy; -dxy -dxy dxy dxy; kappa -kappa kappa -kappa; 1 1 1 1])

solve(f1 == (2.130295*10^-11)*cmd^2 + (1.032633*10^-6)*cmd + (5.48456*10^-4), cmd)

f1 = 0.1
cmd = (154742504910672534362390528*((6592943689973623*f1)/77371252455336267181195264 + 727608011901638924708917863587871/713623846352979940529142984724747568191373312)^(1/2))/6592943689973623 - 159792217073422499840/6592943689973623

floor(cmd)

(2.130295*10^-11)*cmd^2 + (1.032633*10^-6)*cmd + (5.48456*10^-4)